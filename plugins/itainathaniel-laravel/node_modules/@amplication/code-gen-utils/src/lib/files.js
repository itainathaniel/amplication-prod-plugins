"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.print = exports.readFile = exports.readCode = exports.formatCode = void 0;
const promises_1 = require("fs/promises");
const lodash_1 = require("lodash");
const prettier_1 = require("prettier");
const main_1 = require("./parse/main");
const formatCode = (path, code) => {
    if (path.endsWith(".ts") || path.endsWith(".tsx")) {
        return (0, prettier_1.format)(code, { parser: "typescript" });
    }
    if (path.endsWith(".json")) {
        return (0, prettier_1.format)(code, { parser: "json" });
    }
    if (path.endsWith(".yml") || path.endsWith(".yaml")) {
        return (0, prettier_1.format)(code, { parser: "yaml" });
    }
    if (path.endsWith(".md")) {
        return (0, prettier_1.format)(code, { parser: "markdown" });
    }
    if (path.endsWith(".graphql")) {
        return (0, prettier_1.format)(code, { parser: "graphql" });
    }
    return code;
};
exports.formatCode = formatCode;
exports.readCode = (0, lodash_1.memoize)((path) => {
    return (0, promises_1.readFile)(path, "utf-8");
});
const readFile = async (path) => {
    const code = await (0, exports.readCode)(path);
    return (0, main_1.parse)(code);
};
exports.readFile = readFile;
var recast_1 = require("recast");
Object.defineProperty(exports, "print", { enumerable: true, get: function () { return recast_1.print; } });
//# sourceMappingURL=files.js.map